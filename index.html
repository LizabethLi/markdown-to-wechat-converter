<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown to 微信公众号排版转换器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            height: calc(100vh - 180px);
            min-height: 600px;
        }
        
        .panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .panel-header {
            background: #f8fafc;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .panel-title {
            font-weight: 600;
            color: #334155;
            font-size: 1.1rem;
        }
        
        .btn {
            background: #7E3AF2;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        
        .btn:hover {
            background: #6d28d9;
            transform: translateY(-1px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn.success {
            background: #10b981;
        }
        
        .panel-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        #markdownInput {
            flex: 1;
            border: none;
            padding: 1.5rem;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
            background: #fafafa;
            overflow-y: auto;
            scroll-behavior: smooth;
        }
        
        #markdownInput::-webkit-scrollbar {
            width: 8px;
        }
        
        #markdownInput::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        #markdownInput::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        #markdownInput::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        #htmlOutput {
            flex: 1;
            border: none;
            padding: 1.5rem;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            line-height: 1.4;
            resize: none;
            outline: none;
            background: #f8f9fa;
            color: #495057;
            overflow-y: auto;
            max-height: calc(100vh - 400px);
            min-height: 400px;
            scroll-behavior: smooth;
        }
        
        #htmlOutput::-webkit-scrollbar {
            width: 8px;
        }
        
        #htmlOutput::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        #htmlOutput::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        #htmlOutput::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        #preview {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            background: white;
            max-height: calc(100vh - 400px);
            min-height: 400px;
            scroll-behavior: smooth;
        }
        
        #preview::-webkit-scrollbar {
            width: 8px;
        }
        
        #preview::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        #preview::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        #preview::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        .tabs {
            display: flex;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            color: #64748b;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .tab.active {
            color: #7E3AF2;
            border-bottom-color: #7E3AF2;
            background: white;
        }
        
        .tab-content {
            display: none;
            flex: 1;
            flex-direction: column;
        }
        
        .tab-content.active {
            display: flex;
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                height: auto;
                gap: 1rem;
                padding: 1rem;
                min-height: auto;
            }
            
            .panel {
                height: 500px;
                min-height: 500px;
            }
            
            #preview, #htmlOutput {
                max-height: 350px;
                min-height: 350px;
            }
            
            #markdownInput {
                min-height: 350px;
            }
        }
        
        /* 微信公众号样式预览 */
        .wechat-preview {
            font-family: "PingFang SC", system-ui, -apple-system, "Helvetica Neue", "Microsoft YaHei", Arial, sans-serif;
            color: rgba(0, 0, 0, 0.9);
            line-height: 1.5em;
        }
        
        .demo-section {
            margin: 2rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #7E3AF2;
        }
        
        .demo-title {
            font-weight: 600;
            color: #7E3AF2;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>📝 Markdown to 微信公众号排版转换器</h1>
        <p>一键将 Markdown 转换为微信公众号样式，支持实时预览</p>
    </div>
    
    <div class="container">
        <div class="panel">
            <div class="panel-header">
                <span class="panel-title">📝 Markdown 输入</span>
                <div>
                    <select id="modeSelect" style="margin-right: 10px; padding: 5px; border: 1px solid #ddd; border-radius: 4px;" onchange="updateOutput()">
                        <option value="compact">紧凑模式</option>
                        <option value="standard">标准模式</option>
                    </select>
                    <button class="btn" onclick="loadExample()">加载示例</button>
                </div>
            </div>
            <div class="panel-content">
                <textarea id="markdownInput" placeholder="在这里输入你的 Markdown 内容...

💡 使用提示：
• 紧凑模式：去除所有换行，适合微信公众号（推荐）
• 标准模式：保留格式，适合其他编辑器
• 支持嵌套列表：使用4个空格缩进表示下一级

示例：
# 这是主标题
## 这是副标题  
### 这是小标题

这是一段正文，支持 **粗体** 和 *斜体*。

- **一级列表项目1**
    - 二级列表项目1
    - 二级列表项目2
        - 三级列表项目1
        - 三级列表项目2
- **一级列表项目2**
    - 二级列表项目3

> 这是引用内容

```javascript
console.log('代码块');
```

![图片描述](https://via.placeholder.com/400x200)

🔥 复制到微信公众号时请使用【粘贴并保留格式】或【Ctrl+Shift+V】
"></textarea>
            </div>
        </div>
        
        <div class="panel">
            <div class="tabs">
                <button class="tab active" onclick="showTab('preview')">🔍 预览</button>
                <button class="tab" onclick="showTab('html')">📄 HTML代码</button>
            </div>
            
            <div id="previewTab" class="tab-content active">
                <div class="panel-header">
                    <span class="panel-title">👀 效果预览 (可滚动查看)</span>
                    <button class="btn" id="copyPreviewBtn" onclick="copyPreview()">复制样式代码</button>
                </div>
                <div id="preview" class="wechat-preview"></div>
            </div>
            
            <div id="htmlTab" class="tab-content">
                <div class="panel-header">
                    <span class="panel-title">📋 HTML 代码 (可滚动查看)</span>
                    <button class="btn" id="copyHtmlBtn" onclick="copyHtml()">复制代码</button>
                </div>
                <textarea id="htmlOutput" readonly></textarea>
            </div>
        </div>
    </div>
    
    <script>
        // 转换规则配置
        const conversionRules = {
            // 章节编号（### 后面跟数字）
            sectionNumber: /^### (\d+)\s*$/gm,
            
            // 标题层级
            h1: /^# (.+)$/gm,
            h2: /^## (.+)$/gm,
            h3: /^### (.+)$/gm,
            
            // 文本样式
            bold: /\*\*(.+?)\*\*/g,
            italic: /\*(.+?)\*/g,
            
            // 列表（支持嵌套）
            nestedList: /^( {0,})[\-\*\+] (.+)$/gm,
            orderedList: /^( {0,})\d+\. (.+)$/gm,
            
            // 引用
            blockquote: /^> (.+)$/gm,
            
            // 代码
            codeBlock: /```(\w*)\n([\s\S]*?)```/g,
            inlineCode: /`([^`]+)`/g,
            
            // 图片
            image: /!\[([^\]]*)\]\(([^)]+)\)/g,
            
            // 链接
            link: /\[([^\]]+)\]\(([^)]+)\)/g,
            
            // 段落
            paragraph: /^([^#\-\*\+\d\>\`\!\[].*?)$/gm
        };
        
        // 处理嵌套列表的函数
        function processNestedLists(text) {
            const lines = text.split('\n');
            const listGroups = [];
            let currentGroup = null;
            
            // 分析文本，找出所有列表组
            lines.forEach((line, index) => {
                const match = line.match(/^( {0,})[\-\*\+] (.+)$/);
                if (match) {
                    const indent = match[1].length;
                    const content = match[2];
                    const level = Math.floor(indent / 4);
                    
                    if (!currentGroup) {
                        currentGroup = {
                            startIndex: index,
                            items: []
                        };
                    }
                    
                    currentGroup.items.push({ level, content, lineIndex: index });
                } else if (currentGroup) {
                    // 非列表行，结束当前组
                    currentGroup.endIndex = index - 1;
                    listGroups.push(currentGroup);
                    currentGroup = null;
                }
            });
            
            // 处理最后一个组
            if (currentGroup) {
                currentGroup.endIndex = lines.length - 1;
                listGroups.push(currentGroup);
            }
            
            if (listGroups.length === 0) return text;
            
            // 从后往前处理列表组，避免索引变化影响
            let result = text;
            
            listGroups.reverse().forEach(group => {
                // 构建HTML
                let html = '';
                let currentLevel = -1;
                let openTags = [];
                
                group.items.forEach((item) => {
                    const { level, content } = item;
                    
                    if (level > currentLevel) {
                        // 进入更深层级
                        for (let i = currentLevel + 1; i <= level; i++) {
                            // 所有层级都需要左边距来显示圆点，递增20px
                            const marginLeft = (i + 1) * 20;
                            const listStyle = i === 0 ? 'disc' : (i === 1 ? 'circle' : 'square');
                            html += `<ul style="list-style-type: ${listStyle}; padding: 0; margin: 8px 0 8px ${marginLeft}px;">`;
                            openTags.push('ul');
                        }
                    } else if (level < currentLevel) {
                        // 返回上层级别
                        for (let i = currentLevel; i > level; i--) {
                            html += '</ul>';
                            openTags.pop();
                        }
                    }
                    
                    html += `<li style="margin: 6px 0; line-height: 1.6;"><span style="font-size: 14px; color: #333;">${content}</span></li>`;
                    currentLevel = level;
                });
                
                // 关闭所有打开的标签
                while (openTags.length > 0) {
                    html += '</ul>';
                    openTags.pop();
                }
                
                // 替换原文中的这个列表组
                const listLines = lines.slice(group.startIndex, group.endIndex + 1);
                const originalListText = listLines.join('\n');
                result = result.replace(originalListText, html);
            });
            
            return result;
        }
        const wechatStylesCompact = {
            sectionNumber: (match, number) => 
                `<section style="text-align: center; margin: 20px 0 15px 0;"><p style="font-size: 28px; color: rgb(0, 0, 0); line-height: 1.2; font-weight: bold; margin: 0;">${number.padStart(2, '0')}</p></section>`,
            
            h1: (match, text) => 
                `<section style="text-align: center; margin: 25px 0 15px 0;"><p style="min-height: 1em; color: rgb(51, 51, 51); line-height: 1.4; margin: 0;"><strong><span style="background: rgb(126, 58, 242); color: white; padding: 6px 12px; border-radius: 4px; font-size: 16px;">${text}</span></strong></p></section>`,
            
            h2: (match, text) => 
                `<p style="font-size: 20px; font-weight: bold; margin: 25px 0 15px 0; padding-left: 12px; border-left: 4px solid #7E3AF2; line-height: 1.3;"><span style="font-weight: bold; color: #333;">${text}</span></p>`,
            
            h3: (match, text) => 
                `<h3 style="line-height: 1.4; font-size: 16px; margin: 20px 0 10px 0; color: #333; font-weight: bold;">${text}</h3>`,
            
            bold: (match, text) => `<strong style="font-weight: bold; color: #333;">${text}</strong>`,
            
            italic: (match, text) => `<em style="font-style: italic;">${text}</em>`,
            
            unorderedList: (match, text) => 
                `<li style="margin: 5px 0; line-height: 1.6; list-style-type: disc;"><span style="font-size: 14px; color: #333;">${text}</span></li>`,
            
            orderedList: (match, text) => 
                `<li style="margin: 5px 0; line-height: 1.6;"><span style="font-size: 14px; color: #333;">${text}</span></li>`,
            
            blockquote: (match, text) => 
                `<blockquote style="margin: 15px 0; padding: 12px 16px; background: #f8f9fa; border-left: 4px solid #7E3AF2; border-radius: 4px;"><p style="line-height: 1.6; margin: 0; font-size: 14px; color: #555; font-style: italic;">${text}</p></blockquote>`,
            
            codeBlock: (match, lang, code) => 
                `<pre style="background: #f8f9fa; padding: 12px; border-radius: 6px; overflow-x: auto; margin: 15px 0; border: 1px solid #e9ecef; font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 13px; line-height: 1.4; color: #333;">${code.trim()}</pre>`,
            
            inlineCode: (match, code) => 
                `<code style="background: #f1f3f4; padding: 2px 6px; border-radius: 3px; font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 13px; color: #d73a49;">${code}</code>`,
            
            image: (match, alt, src) => {
                const altText = alt ? `<p style="font-size: 12px; color: #999; margin: 5px 0 0 0; font-style: italic; text-align: center;">${alt}</p>` : '';
                return `<section style="text-align: center; margin: 20px 0;"><img src="${src}" alt="${alt}" style="max-width: 100%; height: auto; border-radius: 6px;">${altText}</section>`;
            },
            
            link: (match, text, url) => 
                `<a href="${url}" style="color: #7E3AF2; text-decoration: none; border-bottom: 1px solid #7E3AF2;" target="_blank">${text}</a>`,
            
            paragraph: (match, text) => {
                if (text.trim() === '') return '';
                return `<p style="line-height: 1.7; margin: 12px 0; font-size: 15px; color: #333; text-align: justify;">${text}</p>`;
            }
        };

        // 标准模式样式（保持原有格式，适当换行）
        const wechatStylesStandard = {
            sectionNumber: (match, number) => 
                `<section style="text-align: center; margin: 30px 0;">
                    <p style="font-size: 28px; color: rgb(0, 0, 0); line-height: 40px; font-weight: bold;">
                        ${number.padStart(2, '0')}
                    </p>
                </section>`,
            
            h1: (match, text) => 
                `<section style="text-align: center; margin: 30px 0 20px 0;">
                    <p style="min-height: 1em; color: rgb(51, 51, 51); line-height: 22px;">
                        <strong>
                            <span style="background: rgb(126, 58, 242); color: white; padding: 6px 12px; border-radius: 4px;">
                                ${text}
                            </span>
                        </strong>
                    </p>
                </section>`,
            
            h2: (match, text) => 
                `<p style="font-size: 22px; font-weight: bold; margin: 30px 0 20px 0; padding-left: 12px; border-left: 4px solid #7E3AF2; line-height: 1.4;">
                    <span style="font-weight: bold; color: #333;">${text}</span>
                </p>`,
            
            h3: (match, text) => 
                `<h3 style="line-height: 1.5em; font-size: 18px; margin: 20px 0 10px 0; color: #333;">
                    <span style="font-weight: bold;">${text}</span>
                </h3>`,
            
            bold: (match, text) => `<strong style="font-weight: bold; color: #333;">${text}</strong>`,
            
            italic: (match, text) => `<em style="font-style: italic;">${text}</em>`,
            
            unorderedList: (match, text) => 
                `<li style="margin: 8px 0; line-height: 1.6;">
                    <span style="font-size: 14px; color: #333;">${text}</span>
                </li>`,
            
            orderedList: (match, text) => 
                `<li style="margin: 8px 0; line-height: 1.6;">
                    <span style="font-size: 14px; color: #333;">${text}</span>
                </li>`,
            
            blockquote: (match, text) => 
                `<blockquote style="margin: 20px 0; padding: 15px 20px; background: #f8f9fa; border-left: 4px solid #7E3AF2; border-radius: 4px;">
                    <p style="line-height: 1.6; margin: 0; font-size: 14px; color: #555; font-style: italic;">
                        ${text}
                    </p>
                </blockquote>`,
            
            codeBlock: (match, lang, code) => 
                `<pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto; margin: 20px 0; border: 1px solid #e9ecef;">
                    <code style="font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 13px; line-height: 1.4; color: #333;">${code.trim()}</code>
                </pre>`,
            
            inlineCode: (match, code) => 
                `<code style="background: #f1f3f4; padding: 2px 6px; border-radius: 3px; font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 13px; color: #d73a49;">${code}</code>`,
            
            image: (match, alt, src) => {
                const altText = alt ? `<p style="font-size: 12px; color: #999; margin: 8px 0 0 0; font-style: italic;">${alt}</p>` : '';
                return `<section style="text-align: center; margin: 25px 0;">
                    <img src="${src}" alt="${alt}" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    ${altText}
                </section>`;
            },
            
            link: (match, text, url) => 
                `<a href="${url}" style="color: #7E3AF2; text-decoration: none; border-bottom: 1px solid #7E3AF2;" target="_blank">${text}</a>`,
            
            paragraph: (match, text) => {
                if (text.trim() === '') return '';
                return `<p style="line-height: 1.8; margin: 15px 0; font-size: 15px; color: #333; text-align: justify;">${text}</p>`;
            }
        };
        
        function convertMarkdownToWechat(markdown) {
            const mode = document.getElementById('modeSelect').value;
            const wechatStyles = mode === 'compact' ? wechatStylesCompact : wechatStylesStandard;
            
            let html = markdown;
            
            // 处理代码块（需要最先处理，避免被其他规则影响）
            html = html.replace(conversionRules.codeBlock, wechatStyles.codeBlock);
            
            // 处理各种标题
            html = html.replace(conversionRules.sectionNumber, wechatStyles.sectionNumber);
            html = html.replace(conversionRules.h1, wechatStyles.h1);
            html = html.replace(conversionRules.h2, wechatStyles.h2);
            html = html.replace(conversionRules.h3, wechatStyles.h3);
            
            // 处理引用
            html = html.replace(conversionRules.blockquote, wechatStyles.blockquote);
            
            // 处理图片
            html = html.replace(conversionRules.image, wechatStyles.image);
            
            // 处理链接
            html = html.replace(conversionRules.link, wechatStyles.link);
            
            // 处理嵌套列表（新的处理方式）
            html = processNestedLists(html);
            
            // 处理文本样式
            html = html.replace(conversionRules.bold, wechatStyles.bold);
            html = html.replace(conversionRules.italic, wechatStyles.italic);
            html = html.replace(conversionRules.inlineCode, wechatStyles.inlineCode);
            
            // 处理段落（最后处理）
            html = html.replace(conversionRules.paragraph, wechatStyles.paragraph);
            
            // 根据模式进行不同的清理
            if (mode === 'compact') {
                // 紧凑模式：彻底清理多余的换行和空白字符
                html = html.replace(/\n\s*\n/g, ''); // 移除空行
                html = html.replace(/\n/g, ''); // 移除所有换行符
                html = html.replace(/\s{2,}/g, ' '); // 多个空格压缩为一个
                html = html.replace(/>\s+</g, '><'); // 移除标签间的空白
            } else {
                // 标准模式：保留适当的换行，只清理多余的空行
                html = html.replace(/\n\s*\n\s*\n/g, '\n\n'); // 多个空行压缩为两个换行
            }
            
            // 包装整体容器
            html = `<div style="font-family: 'PingFang SC', system-ui, -apple-system, 'Helvetica Neue', 'Microsoft YaHei', Arial, sans-serif; color: rgba(0, 0, 0, 0.9); max-width: 100%; overflow-wrap: break-word;">${html}</div>`;
            
            return html;
        }
        
        function updateOutput() {
            const markdown = document.getElementById('markdownInput').value;
            const html = convertMarkdownToWechat(markdown);
            
            document.getElementById('htmlOutput').value = html;
            document.getElementById('preview').innerHTML = html;
            
            // 自动滚动到预览顶部
            document.getElementById('preview').scrollTop = 0;
        }
        
        function showTab(tabName) {
            // 移除所有活动状态
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // 激活选中的标签页
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').classList.add('active');
        }
        
        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
                return true;
            } catch (err) {
                // 降级方案
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                const success = document.execCommand('copy');
                document.body.removeChild(textArea);
                return success;
            }
        }
        
        async function copyHtml() {
            const html = document.getElementById('htmlOutput').value;
            const success = await copyToClipboard(html);
            const btn = document.getElementById('copyHtmlBtn');
            
            if (success) {
                btn.textContent = '✅ 已复制';
                btn.classList.add('success');
                setTimeout(() => {
                    btn.textContent = '复制代码';
                    btn.classList.remove('success');
                }, 2000);
            } else {
                alert('复制失败，请手动复制');
            }
        }
        
        async function copyPreview() {
            const html = document.getElementById('htmlOutput').value;
            const success = await copyToClipboard(html);
            const btn = document.getElementById('copyPreviewBtn');
            
            if (success) {
                btn.textContent = '✅ 已复制';
                btn.classList.add('success');
                setTimeout(() => {
                    btn.textContent = '复制样式代码';
                    btn.classList.remove('success');
                }, 2000);
            } else {
                alert('复制失败，请手动复制');
            }
        }
        
        function loadExample() {
            const exampleMarkdown = `# AI视觉领域的"铁三角"

## 他们是谁？

**Lucas Beyer、Alexander Kolesnikov 和 Xiaohua Zhai** 被业界称为 AI 视觉领域的"铁三角"。

### Vision Transformer (ViT)：给AI换了副"眼镜"

**原来VS现在**：

- **原来（CNN方式）**：像一个靠放大镜局部查看图像的人
    - CNN 像一个人拿着放大镜在图片上**从左到右、从上到下地滑动观察**
    - 每次只关注图片的**局部区域（小方块）**，从中提取纹理、边缘等信息
    - 多层叠加后，它逐渐构建出对整体图像的理解
- **现在（ViT方式）**：像一个人把整张图切成拼图块，然后"阅读"这些拼图块的关系
    - ViT 首先把整张图像**切成一个个小块（patch）**，每个块像是一张卡片
    - 把每个卡片"编码"为一个向量，然后像 Transformer 看句子一样
        - 使用注意力机制捕捉它们之间的关系
        - 能同时关注图片任意两个位置
    - 它不像 CNN 那样关注邻近区域，而是能一开始就从全局出发进行建模

### 核心贡献

他们的主要研究成果包括：

- **Big Transfer (BiT)**：让AI成为"学霸"
    - 大规模预训练策略：在3亿张图片的超大数据集上训练AI
    - 标准化迁移流程：建立了一套"预训练→微调"的标准做法
    - BiT-HyperRule规则：根据任务大小自动调整训练参数
- **Vision Transformer (ViT)**：给AI换了副"眼镜"  
    - 图像序列化：把2D图片变成1D序列，就像把文字排成一行
    - 全局注意力机制：能同时关注图片任意两个位置的关系
    - 统一架构：图片和文字用同样的Transformer处理
- **MLP-Mixer**：极简主义的胜利
    - Token-Mixing MLP（空间搅拌器）：混合不同位置间的信息
    - Channel-Mixing MLP（特征搅拌器）：混合每个位置内部的特征
    - 挑战传统认知：证明简单有时更有效

### 技术细节对比

**传统CNN的处理方式**：
- 局部卷积操作
    - 3x3 或 5x5 的小窗口
    - 逐步扩大感受野
    - 层层堆叠提取特征
- 池化降采样
    - 减少计算量
    - 保留重要信息
- 全连接分类
    - 最终特征映射
    - 输出分类结果

**ViT的处理方式**：
- 图像分块编码
    - 16x16 像素为一个patch
    - 线性投影到向量空间
    - 添加位置编码信息
- Transformer处理
    - 多头自注意力机制
        - Query、Key、Value 三元组
        - 计算全局相关性矩阵
    - 前馈神经网络
    - 残差连接和层归一化
- 分类头输出
    - [CLS] token 的最终表示
    - 线性分类器输出结果

> 如果说 AI 是个不断学习的学生，那这三位就是陪它从"看不懂图片"到"能看图说话"的老师。

### 应用场景展示

这些技术已经被广泛应用在：

- **计算机视觉领域**
    - 图像分类任务
        - ImageNet 数据集
        - 细粒度分类
    - 目标检测任务
        - COCO 数据集
        - 实时检测系统
    - 语义分割任务
        - 像素级分类
        - 医学影像分析
- **多模态应用领域**
    - 图文理解任务
        - 看图说话
        - 视觉问答
    - 跨模态检索
        - 图文匹配
        - 内容推荐
- **工业应用领域**
    - 自动驾驶技术
        - 路况识别
        - 障碍物检测
        - 交通标志识别
    - 医学影像诊断
        - X光片分析
        - CT扫描处理
        - 病理切片检查
    - 智能制造系统
        - 质量检测
        - 缺陷识别
        - 自动化分拣

![AI视觉发展](https://via.placeholder.com/600x300/7E3AF2/ffffff?text=AI+Vision+Evolution)

**了解更多**：[点击查看详细论文](https://example.com)`;

            document.getElementById('markdownInput').value = exampleMarkdown;
            updateOutput();
            
            // 滚动到输入区域顶部
            document.getElementById('markdownInput').scrollTop = 0;
        }
        
        // 绑定事件
        document.getElementById('markdownInput').addEventListener('input', updateOutput);
        
        // 初始化
        updateOutput();
    </script>
</body>
</html>
